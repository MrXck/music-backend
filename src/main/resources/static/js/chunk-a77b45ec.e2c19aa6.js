(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a77b45ec"],{"0d33":function(e,t,a){"use strict";a.r(t);var n=a("7a23");const c=Object(n["createTextVNode"])(" 歌单名 "),o=Object(n["createTextVNode"])("修改头像"),l=Object(n["createTextVNode"])(" 创建者 "),i=Object(n["createTextVNode"])(" 选择歌曲 "),r=Object(n["createTextVNode"])("提交");function d(e,t,a,d,s,u){const p=Object(n["resolveComponent"])("n-input"),b=Object(n["resolveComponent"])("n-space"),f=Object(n["resolveComponent"])("n-avatar"),j=Object(n["resolveComponent"])("n-button"),O=Object(n["resolveComponent"])("n-select");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{vertical:"",align:"start"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{vertical:"","item-style":"min-width: 200px"},{default:Object(n["withCtx"])(()=>[c,Object(n["createVNode"])(p,{value:d.songListDetail.name,"onUpdate:value":t[0]||(t[0]=e=>d.songListDetail.name=e),type:"text"},null,8,["value"])]),_:1}),Object(n["createVNode"])(b,{vertical:"",align:"center"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(f,{size:200,src:d.songListDetail.imgSrc,"fallback-src":d.notImage},null,8,["src","fallback-src"]),Object(n["createVNode"])(j,{onClick:d.chooseImg},{default:Object(n["withCtx"])(()=>[o]),_:1},8,["onClick"]),Object(n["createElementVNode"])("input",{ref:"file",type:"file",class:"hidden",onChange:t[1]||(t[1]=(...e)=>d.uploadImg&&d.uploadImg(...e))},null,544)]),_:1}),Object(n["createVNode"])(b,{vertical:"","item-style":"min-width: 200px"},{default:Object(n["withCtx"])(()=>[l,Object(n["createVNode"])(O,{filterable:"","onUpdate:value":[d.updateCreator,t[2]||(t[2]=e=>d.creator=e)],value:d.creator,options:d.creatorOptions},null,8,["onUpdate:value","value","options"])]),_:1}),Object(n["createVNode"])(b,{vertical:"","item-style":"min-width: 200px"},{default:Object(n["withCtx"])(()=>[i,Object(n["createVNode"])(O,{filterable:"",multiple:"","onUpdate:value":[d.update,t[3]||(t[3]=e=>d.value=e)],value:d.value,options:d.options},null,8,["onUpdate:value","value","options"])]),_:1}),Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(j,{onClick:d.updateSongListDetail},{default:Object(n["withCtx"])(()=>[r]),_:1},8,["onClick"])]),_:1})]),_:1})}var s=a("f730"),u=a.n(s),p=a("c872"),b=a("b6e9"),f=a("9c03"),j=a("3519"),O=a("7baf"),v=a("73170"),g=a("6605"),m=a("b775"),h={name:"AdminSongListUpdate",components:{NSpace:p["a"],NInput:b["a"],NAvatar:f["a"],NButton:j["a"],NSelect:O["a"]},setup(){const e=Object(g["d"])();let t,a=Object(v["a"])(),c=Object(n["ref"])({id:"",name:"",imgSrc:"",songs:[]}),o=[],l=Object(n["reactive"])([]),i=Object(n["reactive"])([]),r=Object(n["reactive"])([]),d=Object(n["ref"])(""),s=e.query.id;function p(){m["a"].get("/admin/user/all").then(e=>{if(0===e.data.code)for(let t=0;t<e.data.data.length;t++)i.push({label:e.data.data[t].username,value:e.data.data[t].id})})}function b(){if("image/png"!==t.files[0].type&&"image/jpeg"!==t.files[0].type)return a.error("只能上传png/jpeg格式的图片文件，请重新上传"),!1;if(!(t.files[0].size/1024/1024<2))return a.error("上传头像图片大小不能超过 2MB!"),!1;const e=new FormData;e.append("file",t.files[0]),m["a"].post("/file/uploadAvatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{0===e.data.code&&(c.value.imgSrc=e.data.data)})}function f(){t.click()}function j(){let e=[];for(let t=0;t<r.length;t++)e.push(o.find(e=>e.id===r[t]));c.value.creator=d.value,m["a"].post("/songList/update",c.value).then(e=>{0===e.data.code?a.success("修改成功"):a.error("修改失败")})}function O(e){r.length=0,r.push(...e)}function h(e){console.log(e),d.value=e}return Object(n["onMounted"])(()=>{p(),t=Object(n["getCurrentInstance"])().refs.file,void 0!==s&&m["a"].get("/songList/"+s).then(e=>{if(0===e.data.code){c.value=e.data.data,o=e.data.data.songs;for(let e=0;e<o.length;e++)l.push({label:o[e].name+" 歌手:"+o[e].singers[0].name,value:o[e].id}),r.push(o[e].id)}})}),{notImage:u.a,songListDetail:c,options:l,creatorOptions:i,value:r,creator:d,chooseImg:f,uploadImg:b,update:O,updateSongListDetail:j,updateCreator:h}}},C=(a("3c22"),a("6b0d")),N=a.n(C);const w=N()(h,[["render",d],["__scopeId","data-v-69344d58"]]);t["default"]=w},"3c22":function(e,t,a){"use strict";a("b61b")},b61b:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a77b45ec.e2c19aa6.js.map