(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37ebb987"],{"058e":function(e,t,a){"use strict";a("b9f3")},b9f3:function(e,t,a){},bd4f:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const n=Object(c["createTextVNode"])(" 歌曲名 "),l=Object(c["createTextVNode"])(" 歌曲路径 "),o=Object(c["createTextVNode"])(" 歌曲时间 "),i=Object(c["createTextVNode"])("修改头像"),d=Object(c["createTextVNode"])(" 选择歌手 "),r=Object(c["createTextVNode"])(" 歌词 "),u=Object(c["createTextVNode"])("提交");function s(e,t,a,s,p,b){const f=Object(c["resolveComponent"])("n-input"),j=Object(c["resolveComponent"])("n-space"),O=Object(c["resolveComponent"])("n-avatar"),g=Object(c["resolveComponent"])("n-button"),v=Object(c["resolveComponent"])("n-select");return Object(c["openBlock"])(),Object(c["createBlock"])(j,{vertical:"",align:"start"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(j,{vertical:"","item-style":"min-width: 200px"},{default:Object(c["withCtx"])(()=>[n,Object(c["createVNode"])(f,{value:s.songDetail.name,"onUpdate:value":t[0]||(t[0]=e=>s.songDetail.name=e),type:"text"},null,8,["value"])]),_:1}),Object(c["createVNode"])(j,{vertical:"","item-style":"min-width: 200px"},{default:Object(c["withCtx"])(()=>[l,Object(c["createVNode"])(f,{value:s.songDetail.src,"onUpdate:value":t[1]||(t[1]=e=>s.songDetail.src=e),type:"text"},null,8,["value"])]),_:1}),Object(c["createVNode"])(j,{vertical:"","item-style":"min-width: 200px"},{default:Object(c["withCtx"])(()=>[o,Object(c["createVNode"])(f,{value:s.songDetail.time,"onUpdate:value":t[2]||(t[2]=e=>s.songDetail.time=e),type:"number"},null,8,["value"])]),_:1}),Object(c["createVNode"])(j,{vertical:"",align:"center"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O,{size:200,src:s.songDetail.imgSrc,"fallback-src":s.notImage},null,8,["src","fallback-src"]),Object(c["createVNode"])(g,{onClick:s.chooseImg},{default:Object(c["withCtx"])(()=>[i]),_:1},8,["onClick"]),Object(c["createElementVNode"])("input",{ref:"file",type:"file",class:"hidden",onChange:t[3]||(t[3]=(...e)=>s.uploadImg&&s.uploadImg(...e))},null,544)]),_:1}),Object(c["createVNode"])(j,{vertical:"","item-style":"min-width: 200px"},{default:Object(c["withCtx"])(()=>[d,Object(c["createVNode"])(v,{filterable:"",multiple:"","onUpdate:value":[s.update,t[4]||(t[4]=e=>s.value=e)],value:s.value,options:s.options},null,8,["onUpdate:value","value","options"])]),_:1}),Object(c["createVNode"])(j,{vertical:"","item-style":"min-width: 200px"},{default:Object(c["withCtx"])(()=>[r,Object(c["createVNode"])(f,{type:"textarea",value:s.songDetail.lyric,"onUpdate:value":t[5]||(t[5]=e=>s.songDetail.lyric=e)},null,8,["value"])]),_:1}),Object(c["createVNode"])(j,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(g,{onClick:s.updateSongDetail},{default:Object(c["withCtx"])(()=>[u]),_:1},8,["onClick"])]),_:1})]),_:1})}var p=a("f730"),b=a.n(p),f=a("c872"),j=a("b6e9"),O=a("9c03"),g=a("3519"),v=a("7baf"),m=a("73170"),h=a("6605"),N=a("b775"),x={name:"AdminSongUpdate",components:{NSpace:f["a"],NInput:j["a"],NAvatar:O["a"],NButton:g["a"],NSelect:v["a"]},setup(){const e=Object(h["d"])();let t,a=Object(m["a"])(),n=Object(c["ref"])({id:"",name:"",imgSrc:""}),l=[],o=Object(c["reactive"])([]),i=Object(c["reactive"])([]),d=e.query.id;function r(){N["a"].get("/singer/list").then(e=>{if(0===e.data.code){for(let t=0;t<e.data.data.length;t++)o.push({label:e.data.data[t].name,value:e.data.data[t].id});l=e.data.data}})}function u(){if("image/png"!==t.files[0].type&&"image/jpeg"!==t.files[0].type)return a.error("只能上传png/jpeg格式的图片文件，请重新上传"),!1;if(!(t.files[0].size/1024/1024<2))return a.error("上传头像图片大小不能超过 2MB!"),!1;const e=new FormData;e.append("file",t.files[0]),N["a"].post("/file/uploadAvatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{0===e.data.code&&(n.value.imgSrc=e.data.data)})}function s(){t.click()}function p(){let e=[];console.log(l);for(let t=0;t<i.length;t++)e.push(l.find(e=>e.id===i[t]));n.value.singers=e,N["a"].post("/admin/song/update",n.value).then(e=>{0===e.data.code?a.success("修改成功"):a.error(e.data.msg)})}function f(e){i.length=0,i.push(...e)}return Object(c["onMounted"])(()=>{r(),t=Object(c["getCurrentInstance"])().refs.file,void 0!==d&&N["a"].get("/song/"+d).then(e=>{if(0===e.data.code){n.value=e.data.data;for(let e=0;e<l.length;e++)i.push(l[e].id)}})}),{notImage:b.a,songDetail:n,options:o,value:i,chooseImg:s,uploadImg:u,update:f,updateSongDetail:p}}},V=(a("058e"),a("6b0d")),w=a.n(V);const C=w()(x,[["render",s],["__scopeId","data-v-44059161"]]);t["default"]=C}}]);
//# sourceMappingURL=chunk-37ebb987.d6801af9.js.map