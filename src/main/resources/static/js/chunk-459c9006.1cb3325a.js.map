{"version":3,"sources":["webpack:///./src/views/UserDetail.vue","webpack:///./src/views/UserDetail.vue?c22e","webpack:///./src/views/UserDetail.vue?4b27"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_createVNode","_component_n_space","vertical","align","_component_n_input","value","$setup","username","$event","type","placeholder","password","size","_component_n_button","onClick","_component_n_avatar","src","avatar","ref","onChange","__exports__","render"],"mappings":"qOAAMA,MAAM,oB,QAAwBC,gCAAe,UAAX,UAAM,I,+BAAmF,S,+BAA6K,S,+BAA0S,M,+BAAwC,M,+BAA2O,Q,4OAA12BC,gCAAg/B,MAAh/B,EAAg/B,CAA78BC,EAAoBC,yBAAk7BC,EAAA,M,6BAAh6B,IAA6mB,CAA7mBD,yBAA6mBC,EAAA,CAApmBC,SAAA,IAAQ,C,6BAAc,IAAgK,CAAhKF,yBAAgKC,EAAA,CAAvJE,MAAM,UAAQ,C,6BAAC,IAAqC,4BAA4EC,EAAA,CAA3DC,MAAOC,aAAWC,S,gCAAXD,aAAWC,SAAQC,GAAEC,KAAK,OAAOC,YAAY,OAArE,oB,MAAgHV,yBAAwKC,EAAA,CAA/JE,MAAM,UAAQ,C,6BAAC,IAAqC,4BAAoFC,EAAA,CAAnEC,MAAOC,aAAWK,S,gCAAXL,aAAWK,SAAQH,GAAEC,KAAK,WAAWC,YAAY,WAAzE,oB,MAAwHV,yBAAyNC,EAAA,CAAhNW,KAAK,QAAQ,aAAW,yCAAjC,C,6BAA0F,IAAgE,CAAhEZ,yBAAgEa,EAAA,CAArDC,QAAOR,mBAAkBG,KAAK,WAAzC,C,6BAAmD,IAAE,K,KAArD,eAAiFT,yBAAuBa,EAAA,M,6BAAb,IAAE,K,sBAA8Db,yBAA2RC,EAAA,CAAlRC,SAAA,GAASC,MAAM,UAAxB,C,6BAA8C,IAAmF,CAAnFH,yBAAmFe,EAAA,CAAxEH,KAAM,IAAMI,IAAKV,aAAWW,OAAS,eAAcX,YAA9D,+BAAgGN,yBAA4Ca,EAAA,CAAjCC,QAAOR,aAAS,C,6BAAE,IAAI,K,KAAjC,eAAyDT,gCAAiE,SAA1DqB,IAAI,OAAOT,KAAK,OAAOb,MAAM,SAAUuB,SAAM,oBAAEb,iCAAtD,Y,soCCOv4B,MAAMc,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,yDCTf","file":"js/chunk-459c9006.1cb3325a.js","sourcesContent":["<template>\r<div class=\"user-detail-edit\">\r    <h2>编辑个人信息</h2>\r    <n-space>\r        <n-space vertical>\r            <n-space align=\"center\">\r                昵称：\r                <n-input v-model:value=\"userDetail.username\" type=\"text\" placeholder=\"用户名\"/>\r            </n-space>\r            <n-space align=\"center\">\r                密码：\r                <n-input v-model:value=\"userDetail.password\" type=\"password\" placeholder=\"不输入为不修改\"/>\r            </n-space>\r            <n-space size=\"large\" item-style=\"padding-top: 20px; padding-left: 30px\">\r                <n-button @click=\"updateUserDetail\" type=\"success\">保存</n-button>\r                <n-button>取消</n-button>\r            </n-space>\r        </n-space>\r        <n-space vertical align=\"center\">\r            <n-avatar :size=\"200\" :src=\"userDetail.avatar\" :fallback-src=\"notImage\"></n-avatar>\r            <n-button @click=\"chooseImg\">修改头像</n-button>\r            <input ref=\"file\" type=\"file\" class=\"hidden\" @change=\"uploadImg\">\r        </n-space>\r    </n-space>\r</div>\r</template>\r\r<script>\rimport notImage from '../assets/notImage.jpg'\rimport {reactive, onMounted, getCurrentInstance} from 'vue'\rimport {NSpace, NInput, NButton, NAvatar, useMessage} from 'naive-ui'\rimport request from '../utils/request'\rexport default {\r    name: 'UserDetail',\r    setup(){\r        let user = JSON.parse(localStorage.getItem('user'))\r        let userDetail = reactive({\r            username: user.username,\r            password: '',\r            avatar: user.avatar,\r        })\r\r        let file = null\r\r        let message = useMessage()\r\r        onMounted(() => {\r            file = getCurrentInstance().refs.file\r        })\r\r        function uploadImg(){\r            if (!(file.files[0].type === \"image/png\") && !(file.files[0].type === \"image/jpeg\")) {\r                message.error(\"只能上传png/jpeg格式的图片文件，请重新上传\")\r                return false\r            }\r            if (!(file.files[0].size / 1024 / 1024 < 2)) {\r                message.error('上传头像图片大小不能超过 2MB!');\r                return false\r            }\r            const param = new FormData()\r            param.append('file', file.files[0])\r            request.post('/file/uploadAvatar', param, {headers: {\"Content-Type\": \"multipart/form-data\"}}).then(res => {\r                console.log(res.data)\r                if(res.data.code === 0){\r                    userDetail.avatar = res.data.data\r                }\r            })\r        }\r\r        function chooseImg(){\r            file.click()\r        }\r\r        function updateUserDetail(){\r            request.post('/user/update', userDetail).then(res => {\r                if(res.data.code === 0){\r                    message.success('修改成功')\r                    localStorage.setItem('user', JSON.stringify(res.data.data))\r                    location.reload()\r                }else {\r                    message.error('修改失败')\r                }\r            })\r        }\r\r        return {\r            userDetail,\r\r            notImage,\r\r            uploadImg,\r            chooseImg,\r            updateUserDetail,\r        }\r    },\r    components: {\r        NSpace,\r        NInput,\r        NButton,\r        NAvatar,\r    }\r}\r</script>\r\r<style scoped>\r.user-detail-edit{\r    padding: 24px;\r}\r\r.hidden{\r    display: none;\r}\r</style>\r","import { render } from \"./UserDetail.vue?vue&type=template&id=5875a092&scoped=true\"\nimport script from \"./UserDetail.vue?vue&type=script&lang=js\"\nexport * from \"./UserDetail.vue?vue&type=script&lang=js\"\n\nimport \"./UserDetail.vue?vue&type=style&index=0&id=5875a092&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\xck\\\\Desktop\\\\music-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5875a092\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserDetail.vue?vue&type=style&index=0&id=5875a092&scoped=true&lang=css\""],"sourceRoot":""}