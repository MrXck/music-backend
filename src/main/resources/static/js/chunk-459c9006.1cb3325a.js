(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-459c9006"],{5320:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o=e=>(Object(c["pushScopeId"])("data-v-5875a092"),e=e(),Object(c["popScopeId"])(),e),r={class:"user-detail-edit"},n=o(()=>Object(c["createElementVNode"])("h2",null,"编辑个人信息",-1)),l=Object(c["createTextVNode"])(" 昵称： "),d=Object(c["createTextVNode"])(" 密码： "),s=Object(c["createTextVNode"])("保存"),u=Object(c["createTextVNode"])("取消"),i=Object(c["createTextVNode"])("修改头像");function p(e,t,a,o,p,b){const j=Object(c["resolveComponent"])("n-input"),O=Object(c["resolveComponent"])("n-space"),f=Object(c["resolveComponent"])("n-button"),m=Object(c["resolveComponent"])("n-avatar");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[n,Object(c["createVNode"])(O,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O,{vertical:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O,{align:"center"},{default:Object(c["withCtx"])(()=>[l,Object(c["createVNode"])(j,{value:o.userDetail.username,"onUpdate:value":t[0]||(t[0]=e=>o.userDetail.username=e),type:"text",placeholder:"用户名"},null,8,["value"])]),_:1}),Object(c["createVNode"])(O,{align:"center"},{default:Object(c["withCtx"])(()=>[d,Object(c["createVNode"])(j,{value:o.userDetail.password,"onUpdate:value":t[1]||(t[1]=e=>o.userDetail.password=e),type:"password",placeholder:"不输入为不修改"},null,8,["value"])]),_:1}),Object(c["createVNode"])(O,{size:"large","item-style":"padding-top: 20px; padding-left: 30px"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(f,{onClick:o.updateUserDetail,type:"success"},{default:Object(c["withCtx"])(()=>[s]),_:1},8,["onClick"]),Object(c["createVNode"])(f,null,{default:Object(c["withCtx"])(()=>[u]),_:1})]),_:1})]),_:1}),Object(c["createVNode"])(O,{vertical:"",align:"center"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(m,{size:200,src:o.userDetail.avatar,"fallback-src":o.notImage},null,8,["src","fallback-src"]),Object(c["createVNode"])(f,{onClick:o.chooseImg},{default:Object(c["withCtx"])(()=>[i]),_:1},8,["onClick"]),Object(c["createElementVNode"])("input",{ref:"file",type:"file",class:"hidden",onChange:t[2]||(t[2]=(...e)=>o.uploadImg&&o.uploadImg(...e))},null,544)]),_:1})]),_:1})])}var b=a("f730"),j=a.n(b),O=a("73170"),f=a("c872"),m=a("b6e9"),g=a("3519"),v=a("9c03"),N=a("b775"),h={name:"UserDetail",setup(){let e=JSON.parse(localStorage.getItem("user")),t=Object(c["reactive"])({username:e.username,password:"",avatar:e.avatar}),a=null,o=Object(O["a"])();function r(){if("image/png"!==a.files[0].type&&"image/jpeg"!==a.files[0].type)return o.error("只能上传png/jpeg格式的图片文件，请重新上传"),!1;if(!(a.files[0].size/1024/1024<2))return o.error("上传头像图片大小不能超过 2MB!"),!1;const e=new FormData;e.append("file",a.files[0]),N["a"].post("/file/uploadAvatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e.data),0===e.data.code&&(t.avatar=e.data.data)})}function n(){a.click()}function l(){N["a"].post("/user/update",t).then(e=>{0===e.data.code?(o.success("修改成功"),localStorage.setItem("user",JSON.stringify(e.data.data)),location.reload()):o.error("修改失败")})}return Object(c["onMounted"])(()=>{a=Object(c["getCurrentInstance"])().refs.file}),{userDetail:t,notImage:j.a,uploadImg:r,chooseImg:n,updateUserDetail:l}},components:{NSpace:f["a"],NInput:m["a"],NButton:g["a"],NAvatar:v["a"]}},w=(a("c33d"),a("6b0d")),C=a.n(w);const V=C()(h,[["render",p],["__scopeId","data-v-5875a092"]]);t["default"]=V},9291:function(e,t,a){},c33d:function(e,t,a){"use strict";a("9291")}}]);
//# sourceMappingURL=chunk-459c9006.1cb3325a.js.map